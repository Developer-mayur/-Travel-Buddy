<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #search-bar {
            padding: 10px;
            font-size: 16px;
            width: 80%;
            max-width: 500px;
        }
        #search-button {
            padding: 10px;
            font-size: 16px;
        }
        .article {
            margin: 20px 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
        }
        .article img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            margin-right: 15px;
        }
        .article h3 {
            margin: 0;
        }
        .article p {
            color: #555;
        }
    </style>
</head>
<body>

<h1>Search News</h1>
<!-- Search Input and Button -->
<input type="text" id="search-bar" placeholder="Search for news...">
<button id="search-button">Search</button>

<!-- Filter Section (Category and Country) -->
<select id="category-select">
    <option value="general">General</option>
    <option value="business">Business</option>
    <option value="entertainment">Entertainment</option>
    <option value="health">Health</option>
    <option value="science">Science</option>
    <option value="sports">Sports</option>
    <option value="technology">Technology</option>
</select>

<select id="country-select">
    <option value="in">India</option>
    <option value="us">USA</option>
    <option value="au">Australia</option>
    <option value="gb">UK</option>
    <option value="fr">France</option>
    <option value="ru">Russia</option>
</select>

<!-- Results Container -->
<div id="results"></div>

<script>
  
// Elements
const searchButton = document.getElementById('search-button');
const searchBar = document.getElementById('search-bar');
const resultsContainer = document.getElementById('results');
const categorySelect = document.getElementById('category-select');
const countrySelect = document.getElementById('country-select');

// Fetch the search results based on query, category, and country
function fetchNews(query, category, country) {
    const url = `https://saurav.tech/NewsAPI/top-headlines/category/${category}/${country}.json`;
    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.status === 'ok') {
                const filteredArticles = data.articles.filter(article => article.title.toLowerCase().includes(query.toLowerCase()) || article.description.toLowerCase().includes(query.toLowerCase()));
                displayResults(filteredArticles);
            } else {
                resultsContainer.innerHTML = 'No results found.';
            }
        })
        .catch(error => {
            console.error('Error fetching the news:', error);
            resultsContainer.innerHTML = 'Error fetching news.';
        });
}

// Display the news articles
function displayResults(articles) {
    resultsContainer.innerHTML = ''; // Clear previous results
    if (articles.length === 0) {
        resultsContainer.innerHTML = 'No articles found.';
        return;
    }

    articles.forEach(article => {
        const articleElement = document.createElement('div');
        articleElement.classList.add('article');
        articleElement.innerHTML = `
            <div style="display: flex; align-items: center;">
                <img src="${article.urlToImage}" alt="${article.title}" />
                <div>
                    <h3><a href="${article.url}" target="_blank">${article.title}</a></h3>
                    <p>${article.description}</p>
                </div>
            </div>
        `;
        resultsContainer.appendChild(articleElement);
    });
}

// Event Listener for Search Button
searchButton.addEventListener('click', function() {
    const query = searchBar.value.trim();
    const category = categorySelect.value;
    const country = countrySelect.value;

    if (query) {
        fetchNews(query, category, country);
    } else {
        alert("Please enter a search term!");
    }
});

// Optional: You can add more features like live search or resetting results here
</script>

</body>
</html>
